{"version":3,"file":"ctx-tmp-dir.js","sourceRoot":"","sources":["../../../src/test/helpers/ctx-tmp-dir.ts"],"names":[],"mappings":";;;AAAA,2BAA4B;AAE5B,uEAAgE;AAEhE;;;;;;;;GAQG;AACI,KAAK,UAAU,wBAAwB,CAAC,CAAmB;IAChE,MAAM,OAAO,GAAG,IAAA,mCAAc,EAAC;QAC7B,IAAI,EAAE,cAAc;QACpB,OAAO,EAAE,IAAA,WAAM,GAAE;KAClB,CAAC,CAAC;IACH,OAAO;QACL,MAAM,EAAE,OAAO,CAAC,GAAG;QACnB,OAAO;KACR,CAAC;AACJ,CAAC;AATD,4DASC;AAMM,KAAK,UAAU,SAAS,CAAC,CAAmB;IACjD,MAAM,OAAO,GAAG,IAAA,mCAAc,EAAC,cAAc,CAAC,CAAC;IAC/C,OAAO;QACL,OAAO;QACP,MAAM,EAAE,OAAO,CAAC,GAAG;KACpB,CAAC;AACJ,CAAC;AAND,8BAMC","sourcesContent":["import { tmpdir } from 'os';\nimport type { ExecutionContext } from '../testlib';\nimport { tempdirProject } from '@TypeStrong/fs-fixture-builder';\n\n/**\n * This helpers gives you an empty directory in the OS temp directory, *outside*\n * of the git clone.\n *\n * Some tests must run in a directory that is *outside* of the git clone.\n * When TS and ts-node search for a tsconfig, they traverse up the filesystem.\n * If they run inside our git clone, they will find the root tsconfig.json, and\n * we do not always want that.\n */\nexport async function ctxTmpDirOutsideCheckout(t: ExecutionContext) {\n  const fixture = tempdirProject({\n    name: 'ts-node-spec',\n    rootDir: tmpdir(),\n  });\n  return {\n    tmpDir: fixture.cwd,\n    fixture,\n  };\n}\nexport namespace ctxTmpDirOutsideCheckout {\n  export type Ctx = Awaited<ReturnType<typeof ctxTmpDirOutsideCheckout>>;\n  export type T = ExecutionContext<Ctx>;\n}\n\nexport async function ctxTmpDir(t: ExecutionContext) {\n  const fixture = tempdirProject('ts-node-spec');\n  return {\n    fixture,\n    tmpDir: fixture.cwd,\n  };\n}\nexport namespace ctxTmpDir {\n  export type Ctx = Awaited<ReturnType<typeof ctxTmpDirOutsideCheckout>>;\n  export type T = ExecutionContext<Ctx>;\n}\n"]}